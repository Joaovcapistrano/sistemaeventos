<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Lista de Usuarios</title>
    </h:head>
    <h:body>
        <h:form>            
            <h:column>
                <p:commandButton value="Voltar" id="voltar" action="index" style="margin-right:20px;" ajax="false" />
            </h:column>
            <h:column>
                <p:commandButton value="Cadastrar" id="cad" action="#{guiUsuario.cadastrar()}" style="margin-right:20px;" ajax="false" />
            </h:column>
        </h:form>
        <p:dataTable id="userData" var="user" value="#{guiUsuario.usuarios}">
            <p:column headerText="ID">
                <h:outputLabel value="#{user.id}" />
            </p:column>

            <p:column headerText="Nome Completo">
                <h:outputLabel value="#{user.nomeCompleto}" />
            </p:column>

            <p:column headerText="Data de Nascimento">
                <h:outputLabel value="#{user.dataNascimento}" converter="localDateFacesConverter" />
            </p:column>

            <p:column headerText="Mais detalhes" style="text-align: center">
      
                <p:commandButton value="Ver Mais" id="details" oncomplete="PF('ver').show()" style="margin-right:20px;" update="verDetalhes">
                    <f:setPropertyActionListener value="#{user}" target="#{guiUsuario.user}"/>
                </p:commandButton>
            </p:column>
        </p:dataTable>
    </h:body>
    
    <p:dialog id="verDetalhes" dynamic="true" header="Detalhes do Usuário" widgetVar="ver" modal="true" height="525" width="750">
                            <h:form >
                            <h3>Dados Cadastrais</h3>
                                <div id="detalhesForm" class="ui-fluid">
                                    <div id="divNome" class="p-field">
                                        <p:outputLabel value="Nome Completo" />
                                        <p:inputText id="nome" value="#{guiUsuario.user.nomeCompleto}" disabled="true"/>
                                    </div>

                                    <div id="divDataNasc" class="p-field">
                                        <p:outputLabel value="Data de Nascimento" />
                                        <p:calendar id="dataNasc" value="#{guiUsuario.user.dataNascimento}" pattern="dd/MM/yyyy" navigator="true" mask="99/99/9999" showOn="button" disabled="true"/>
                                    </div>

                                    <div id="divSexo" class="p-field">
                                        <p:outputLabel value="Sexo" />
                                        <p:selectOneButton value="#{guiUsuario.user.sexo}" disabled="true">
                                            <f:selectItem itemLabel="Masculino" itemValue="masculino" />
                                            <f:selectItem itemLabel="Feminino" itemValue="feminino" />                        
                                        </p:selectOneButton>
                                    </div>

                                    <div id="divEnd" class="p-field">
                                        <p:outputLabel value="Endereço" />
                                        <p:inputText id="endereco" value="#{guiUsuario.user.endereco}" disabled="true"/>
                                    </div>

                                    <div id="divTel" class="p-field">

                                        <p:dataTable id="tabelaTel" var="telefone" value="#{guiUsuario.user.telefones}" >
                                            <p:column headerText="DDD">
                                                <p:outputLabel value="#{telefone.ddd}" />
                                            </p:column>

                                            <p:column headerText="Número">
                                                <p:outputLabel value="#{telefone.numero}" />
                                            </p:column>

                                        </p:dataTable>

                                    </div>  

                                    <div id="divLogin" class="p-field">
                                        <p:outputLabel value="Login" />
                                        <p:inputText id="login" value="#{guiUsuario.user.login}" disabled="true" />
                                    </div>


                                    <div id="divTipo" class="p-field">
                                        <p:outputLabel value="Tipo de Usuário   " />
                                        <p:selectOneMenu id="nivelAcesso" value="#{guiUsuario.user.nivelAcesso}" style="width:200px" disabled="true">
                                            <f:selectItems value="#{guiUsuario.tiposDeUsuario}"  />  
                                        </p:selectOneMenu>
                                    </div> 

                                    <div id="divAlterar" class="p-field">
                                        <p:commandButton value="Alterar" id="alterar" action="CadUsuario"  style="margin-right:20px;" ajax="false" />                                                                            
                                    </div>
                                    
                                    <div id="divExcluir" class="p-field">
                                        <p:commandButton value="Excluir" id="excluir" action="#{guiUsuario.excluir()}"  style="margin-right:20px;" ajax="false" />                                                                            
                                    </div>

                                </div>
                            </h:form>                                          
    </p:dialog>
</html>

